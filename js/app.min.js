"use strict";const header=document.querySelector("#js-templates-cost-title"),minCost=document.querySelector("#js-cost-min"),maxCost=document.querySelector("#js-cost-max");if(header&&minCost&&maxCost){const e=e=>{const t=document.createElement("input");return t.classList.add("templates__cost-range"),t.type="range",t.min=0,t.max=2e4,t.value=e,t},t=document.createElement("div");t.classList.add("templates__cost-range-wrapper"),t.append(e(minCost.value)),t.append(e(maxCost.value)),header.after(t)}const OPENED_CLASS="popup--opened",NO_JS_CLASS="popup--no-js",ERROR_CLASS="popup--error",ERROR_MESSAGE="Обязательное поле для заполнения",URL="https://echo.htmlacademy.ru/",popup=document.querySelector("#popup-js"),openPopupBtn=document.querySelector("#placement__description-button-js"),closePopupBtn=document.querySelector("#popup__close-button-js"),submitPopupFormBtn=document.querySelector("#popup__submit-js"),nameInput=document.querySelector("#popup-field-name-js"),emailInput=document.querySelector("#popup-field-email-js"),letterTextarea=document.querySelector("#popup-field-letter-js"),openPopup=e=>{e.preventDefault(),popup.classList.add(OPENED_CLASS),closePopupBtn.addEventListener("click",closePopup),submitPopupFormBtn.addEventListener("click",submitForm),nameInput.addEventListener("input",onFieldDataChanged),emailInput.addEventListener("input",onFieldDataChanged),letterTextarea.addEventListener("input",onFieldDataChanged)},closePopup=e=>{e&&e.preventDefault(),popup.classList.remove(OPENED_CLASS),popup.classList.remove(ERROR_CLASS),closePopupBtn.removeEventListener("click",closePopup),submitPopupFormBtn.removeEventListener("click",submitForm),nameInput.removeEventListener("input",onFieldDataChanged),emailInput.removeEventListener("input",onFieldDataChanged),letterTextarea.removeEventListener("input",onFieldDataChanged)},submitForm=e=>{e.preventDefault(),popup.classList.remove(ERROR_CLASS),isValidFormData()&&fetch(URL).then(e=>{if(!e.ok)throw popup.classList.add(ERROR_CLASS),new Error(`_${e.status}: ${e.statusText}`);return closePopup(),e}).catch(e=>{throw popup.classList.add(ERROR_CLASS),e})},isValidField=e=>e.value.length>0?(e.setCustomValidity(""),!0):(e.setCustomValidity(ERROR_MESSAGE),!1),isValidFormData=()=>isValidField(nameInput)&&isValidField(emailInput)&&isValidField(letterTextarea),onFieldDataChanged=e=>{isValidField(e.target)};popup&&openPopupBtn&&closePopupBtn&&submitPopupFormBtn&&(popup.classList.remove(NO_JS_CLASS),openPopupBtn.addEventListener("click",openPopup));const sliderContainer=document.querySelector(".principles");if(sliderContainer){const e="principles__slide--active",t="principles__control-button--active",n=e=>{const t=document.createElement("div");return t.innerHTML=e,t.firstChild},s=(s,o)=>{const p=n(`<li>\n        <button class="principles__control-button  ${o?"":t}" type="button">\n          <span class="visually-hidden">Принцип ${o+1}</span>\n        </button>\n      </li>`);return p.firstElementChild.addEventListener("click",n=>{const o=sliderContainer.querySelector("."+e);o!==s&&(sliderContainer.querySelector("."+t).classList.remove(t),o.classList.remove(e),s.classList.add(e),n.target.classList.add(t))}),o||s.classList.add(e),p},o=sliderContainer.querySelector("#principles__slider-js"),p=sliderContainer.querySelectorAll(".principles__slide"),i=n('<ul class="principles__control list-reset"></ul>');p.forEach((e,t)=>{e.classList.remove("principles__slide--no-js"),i.append(s(e,t))}),o.after(i)}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm11bHRpcGxlLXJhbmdlLmpzIiwicG9wdXAuanMiLCJzbGlkZXIuanMiXSwibmFtZXMiOlsiaGVhZGVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibWluQ29zdCIsIm1heENvc3QiLCJjcmVhdGVSYW5nZUlucHV0IiwidmFsdWUiLCJyYW5nZUlucHV0IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInR5cGUiLCJtaW4iLCJtYXgiLCJyYW5nZVdyYXBwZXIiLCJhcHBlbmQiLCJhZnRlciIsIk9QRU5FRF9DTEFTUyIsIk5PX0pTX0NMQVNTIiwiRVJST1JfQ0xBU1MiLCJFUlJPUl9NRVNTQUdFIiwiVVJMIiwicG9wdXAiLCJvcGVuUG9wdXBCdG4iLCJjbG9zZVBvcHVwQnRuIiwic3VibWl0UG9wdXBGb3JtQnRuIiwibmFtZUlucHV0IiwiZW1haWxJbnB1dCIsImxldHRlclRleHRhcmVhIiwib3BlblBvcHVwIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xvc2VQb3B1cCIsInN1Ym1pdEZvcm0iLCJvbkZpZWxkRGF0YUNoYW5nZWQiLCJyZW1vdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaXNWYWxpZEZvcm1EYXRhIiwiZmV0Y2giLCJ0aGVuIiwicmVzcG9uc2UiLCJvayIsIkVycm9yIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImNhdGNoIiwiZXJyb3IiLCJpc1ZhbGlkRmllbGQiLCJmaWVsZCIsImxlbmd0aCIsInNldEN1c3RvbVZhbGlkaXR5IiwidGFyZ2V0Iiwic2xpZGVyQ29udGFpbmVyIiwiU0xJREVfQUNUSVZFX0NMQVNTIiwiQlVUVE9OX0FDVElWRV9DTEFTUyIsInRlbXBsYXRlIiwibmV3RWxlbWVudCIsImlubmVySFRNTCIsImZpcnN0Q2hpbGQiLCJjcmVhdGVTbGlkZXJCdXR0b24iLCJzbGlkZSIsIm51bWJlciIsImJ1dHRvbldyYXBwZXIiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImN1cnJlbnRTbGlkZSIsImJlZm9yZUluc2VydEJsb2NrIiwic2xpZGVzIiwicXVlcnlTZWxlY3RvckFsbCIsImJ1dHRvbnNDb250YWluZXIiLCJmb3JFYWNoIiwiaW5kZXgiXSwibWFwcGluZ3MiOiJBQUFBLGFBRUEsTUFBQUEsT0FBQUMsU0FBQUMsY0FBQSw0QkFDQUMsUUFBQUYsU0FBQUMsY0FBQSxnQkFDQUUsUUFBQUgsU0FBQUMsY0FBQSxnQkFFQSxHQUFBRixRQUFBRyxTQUFBQyxRQUFBLENBQ0EsTUFBQUMsRUFBQUMsSUFDQSxNQUFBQyxFQUFBTixTQUFBTyxjQUFBLFNBT0EsT0FOQUQsRUFBQUUsVUFBQUMsSUFBQSx5QkFDQUgsRUFBQUksS0FBQSxRQUNBSixFQUFBSyxJQUFBLEVBQ0FMLEVBQUFNLElBQUEsSUFDQU4sRUFBQUQsTUFBQUEsRUFFQUMsR0FHQU8sRUFBQWIsU0FBQU8sY0FBQSxPQUNBTSxFQUFBTCxVQUFBQyxJQUFBLGlDQUNBSSxFQUFBQyxPQUFBVixFQUFBRixRQUFBRyxRQUNBUSxFQUFBQyxPQUFBVixFQUFBRCxRQUFBRSxRQUNBTixPQUFBZ0IsTUFBQUYsR0NwQkEsTUFBQUcsYUFBQSxnQkFDQUMsWUFBQSxlQUNBQyxZQUFBLGVBQ0FDLGNBQUEsbUNBQ0FDLElBQUEsK0JBRUFDLE1BQUFyQixTQUFBQyxjQUFBLGFBQ0FxQixhQUFBdEIsU0FBQUMsY0FBQSxxQ0FDQXNCLGNBQUF2QixTQUFBQyxjQUFBLDJCQUNBdUIsbUJBQUF4QixTQUFBQyxjQUFBLHFCQUNBd0IsVUFBQXpCLFNBQUFDLGNBQUEsd0JBQ0F5QixXQUFBMUIsU0FBQUMsY0FBQSx5QkFDQTBCLGVBQUEzQixTQUFBQyxjQUFBLDBCQUVBMkIsVUFBQUMsSUFDQUEsRUFBQUMsaUJBRUFULE1BQUFiLFVBQUFDLElBQUFPLGNBRUFPLGNBQUFRLGlCQUFBLFFBQUFDLFlBQ0FSLG1CQUFBTyxpQkFBQSxRQUFBRSxZQUNBUixVQUFBTSxpQkFBQSxRQUFBRyxvQkFDQVIsV0FBQUssaUJBQUEsUUFBQUcsb0JBQ0FQLGVBQUFJLGlCQUFBLFFBQUFHLHFCQUdBRixXQUFBSCxJQUNBQSxHQUNBQSxFQUFBQyxpQkFHQVQsTUFBQWIsVUFBQTJCLE9BQUFuQixjQUNBSyxNQUFBYixVQUFBMkIsT0FBQWpCLGFBRUFLLGNBQUFhLG9CQUFBLFFBQUFKLFlBQ0FSLG1CQUFBWSxvQkFBQSxRQUFBSCxZQUNBUixVQUFBVyxvQkFBQSxRQUFBRixvQkFDQVIsV0FBQVUsb0JBQUEsUUFBQUYsb0JBQ0FQLGVBQUFTLG9CQUFBLFFBQUFGLHFCQUdBRCxXQUFBSixJQUNBQSxFQUFBQyxpQkFFQVQsTUFBQWIsVUFBQTJCLE9BQUFqQixhQUVBbUIsbUJBQ0FDLE1BQUFsQixLQUNBbUIsS0FBQUMsSUFDQSxJQUFBQSxFQUFBQyxHQUdBLE1BRkFwQixNQUFBYixVQUFBQyxJQUFBUyxhQUVBLElBQUF3QixNQUFBLElBQUFGLEVBQUFHLFdBQUFILEVBQUFJLGNBS0EsT0FGQVosYUFFQVEsSUFFQUssTUFBQUMsSUFHQSxNQUZBekIsTUFBQWIsVUFBQUMsSUFBQVMsYUFFQTRCLEtBS0FDLGFBQUFDLEdBQ0FBLEVBQUEzQyxNQUFBNEMsT0FBQSxHQUNBRCxFQUFBRSxrQkFBQSxLQUVBLElBR0FGLEVBQUFFLGtCQUFBL0IsZ0JBRUEsR0FHQWtCLGdCQUFBLElBQ0FVLGFBQUF0QixZQUNBc0IsYUFBQXJCLGFBQ0FxQixhQUFBcEIsZ0JBR0FPLG1CQUFBTCxJQUNBa0IsYUFBQWxCLEVBQUFzQixTQUdBOUIsT0FBQUMsY0FBQUMsZUFBQUMscUJBQ0FILE1BQUFiLFVBQUEyQixPQUFBbEIsYUFDQUssYUFBQVMsaUJBQUEsUUFBQUgsWUMzRkEsTUFBQXdCLGdCQUFBcEQsU0FBQUMsY0FBQSxlQUVBLEdBQUFtRCxnQkFBQSxDQUNBLE1BQUFDLEVBQUEsNEJBQ0FDLEVBQUEscUNBRUEvQyxFQUFBZ0QsSUFDQSxNQUFBQyxFQUFBeEQsU0FBQU8sY0FBQSxPQUVBLE9BREFpRCxFQUFBQyxVQUFBRixFQUNBQyxFQUFBRSxZQUdBQyxFQUFBLENBQUFDLEVBQUFDLEtBQ0EsTUFRQUMsRUFBQXZELEVBUkEsNERBRUFzRCxFQUFBLEdBQUFQLHNFQUNBTyxFQUFBLDRDQXVCQSxPQWpCQUMsRUFBQUMsa0JBQUFoQyxpQkFBQSxRQUFBRixJQUNBLE1BQUFtQyxFQUFBWixnQkFBQW5ELGNBQUEsSUFBQW9ELEdBRUFXLElBQUFKLElBQ0FSLGdCQUFBbkQsY0FBQSxJQUFBcUQsR0FDQTlDLFVBQUEyQixPQUFBbUIsR0FDQVUsRUFBQXhELFVBQUEyQixPQUFBa0IsR0FFQU8sRUFBQXBELFVBQUFDLElBQUE0QyxHQUNBeEIsRUFBQXNCLE9BQUEzQyxVQUFBQyxJQUFBNkMsTUFJQU8sR0FDQUQsRUFBQXBELFVBQUFDLElBQUE0QyxHQUdBUyxHQUdBRyxFQUFBYixnQkFBQW5ELGNBQUEsMEJBQ0FpRSxFQUFBZCxnQkFBQWUsaUJBQUEsc0JBRUFDLEVBQUE3RCxFQUFBLG9EQUVBMkQsRUFBQUcsUUFBQSxDQUFBVCxFQUFBVSxLQUNBVixFQUFBcEQsVUFBQTJCLE9BQUEsNEJBRUFpQyxFQUFBdEQsT0FBQTZDLEVBQUFDLEVBQUFVLE1BSUFMLEVBQUFsRCxNQUFBcUQiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2pzLXRlbXBsYXRlcy1jb3N0LXRpdGxlYCk7XG5jb25zdCBtaW5Db3N0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2pzLWNvc3QtbWluYCk7XG5jb25zdCBtYXhDb3N0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2pzLWNvc3QtbWF4YCk7XG5cbmlmIChoZWFkZXIgJiYgbWluQ29zdCAmJiBtYXhDb3N0KSB7XG4gIGNvbnN0IGNyZWF0ZVJhbmdlSW5wdXQgPSAodmFsdWUpID0+IHtcbiAgICBjb25zdCByYW5nZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChgaW5wdXRgKTtcbiAgICByYW5nZUlucHV0LmNsYXNzTGlzdC5hZGQoYHRlbXBsYXRlc19fY29zdC1yYW5nZWApO1xuICAgIHJhbmdlSW5wdXQudHlwZSA9IGByYW5nZWA7XG4gICAgcmFuZ2VJbnB1dC5taW4gPSAwO1xuICAgIHJhbmdlSW5wdXQubWF4ID0gMjAwMDA7XG4gICAgcmFuZ2VJbnB1dC52YWx1ZSA9IHZhbHVlO1xuXG4gICAgcmV0dXJuIHJhbmdlSW5wdXQ7XG4gIH07XG5cbiAgY29uc3QgcmFuZ2VXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChgZGl2YCk7XG4gIHJhbmdlV3JhcHBlci5jbGFzc0xpc3QuYWRkKGB0ZW1wbGF0ZXNfX2Nvc3QtcmFuZ2Utd3JhcHBlcmApO1xuICByYW5nZVdyYXBwZXIuYXBwZW5kKGNyZWF0ZVJhbmdlSW5wdXQobWluQ29zdC52YWx1ZSkpO1xuICByYW5nZVdyYXBwZXIuYXBwZW5kKGNyZWF0ZVJhbmdlSW5wdXQobWF4Q29zdC52YWx1ZSkpO1xuICBoZWFkZXIuYWZ0ZXIocmFuZ2VXcmFwcGVyKTtcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuY29uc3QgT1BFTkVEX0NMQVNTID0gYHBvcHVwLS1vcGVuZWRgO1xuY29uc3QgTk9fSlNfQ0xBU1MgPSBgcG9wdXAtLW5vLWpzYDtcbmNvbnN0IEVSUk9SX0NMQVNTID0gYHBvcHVwLS1lcnJvcmA7XG5jb25zdCBFUlJPUl9NRVNTQUdFID0gYNCe0LHRj9C30LDRgtC10LvRjNC90L7QtSDQv9C+0LvQtSDQtNC70Y8g0LfQsNC/0L7Qu9C90LXQvdC40Y9gO1xuY29uc3QgVVJMID0gYGh0dHBzOi8vZWNoby5odG1sYWNhZGVteS5ydS9gO1xuXG5jb25zdCBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNwb3B1cC1qc2ApO1xuY29uc3Qgb3BlblBvcHVwQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3BsYWNlbWVudF9fZGVzY3JpcHRpb24tYnV0dG9uLWpzYCk7XG5jb25zdCBjbG9zZVBvcHVwQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3BvcHVwX19jbG9zZS1idXR0b24tanNgKTtcbmNvbnN0IHN1Ym1pdFBvcHVwRm9ybUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNwb3B1cF9fc3VibWl0LWpzYCk7XG5jb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjcG9wdXAtZmllbGQtbmFtZS1qc2ApO1xuY29uc3QgZW1haWxJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNwb3B1cC1maWVsZC1lbWFpbC1qc2ApO1xuY29uc3QgbGV0dGVyVGV4dGFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjcG9wdXAtZmllbGQtbGV0dGVyLWpzYCk7XG5cbmNvbnN0IG9wZW5Qb3B1cCA9IChldnQpID0+IHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgcG9wdXAuY2xhc3NMaXN0LmFkZChPUEVORURfQ0xBU1MpO1xuXG4gIGNsb3NlUG9wdXBCdG4uYWRkRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCBjbG9zZVBvcHVwKTtcbiAgc3VibWl0UG9wdXBGb3JtQnRuLmFkZEV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgc3VibWl0Rm9ybSk7XG4gIG5hbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKGBpbnB1dGAsIG9uRmllbGREYXRhQ2hhbmdlZCk7XG4gIGVtYWlsSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihgaW5wdXRgLCBvbkZpZWxkRGF0YUNoYW5nZWQpO1xuICBsZXR0ZXJUZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKGBpbnB1dGAsIG9uRmllbGREYXRhQ2hhbmdlZCk7XG59O1xuXG5jb25zdCBjbG9zZVBvcHVwID0gKGV2dCkgPT4ge1xuICBpZiAoZXZ0KSB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIH1cblxuICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKE9QRU5FRF9DTEFTUyk7XG4gIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoRVJST1JfQ0xBU1MpO1xuXG4gIGNsb3NlUG9wdXBCdG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCBjbG9zZVBvcHVwKTtcbiAgc3VibWl0UG9wdXBGb3JtQnRuLnJlbW92ZUV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgc3VibWl0Rm9ybSk7XG4gIG5hbWVJbnB1dC5yZW1vdmVFdmVudExpc3RlbmVyKGBpbnB1dGAsIG9uRmllbGREYXRhQ2hhbmdlZCk7XG4gIGVtYWlsSW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihgaW5wdXRgLCBvbkZpZWxkRGF0YUNoYW5nZWQpO1xuICBsZXR0ZXJUZXh0YXJlYS5yZW1vdmVFdmVudExpc3RlbmVyKGBpbnB1dGAsIG9uRmllbGREYXRhQ2hhbmdlZCk7XG59O1xuXG5jb25zdCBzdWJtaXRGb3JtID0gKGV2dCkgPT4ge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKEVSUk9SX0NMQVNTKTtcblxuICBpZiAoaXNWYWxpZEZvcm1EYXRhKCkpIHtcbiAgICBmZXRjaChVUkwpXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgIHBvcHVwLmNsYXNzTGlzdC5hZGQoRVJST1JfQ0xBU1MpO1xuXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBfJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBjbG9zZVBvcHVwKCk7XG5cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgcG9wdXAuY2xhc3NMaXN0LmFkZChFUlJPUl9DTEFTUyk7XG5cbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9KTtcbiAgfVxufTtcblxuY29uc3QgaXNWYWxpZEZpZWxkID0gKGZpZWxkKSA9PiB7XG4gIGlmIChmaWVsZC52YWx1ZS5sZW5ndGggPiAwKSB7XG4gICAgZmllbGQuc2V0Q3VzdG9tVmFsaWRpdHkoYGApO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBmaWVsZC5zZXRDdXN0b21WYWxpZGl0eShFUlJPUl9NRVNTQUdFKTtcblxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5jb25zdCBpc1ZhbGlkRm9ybURhdGEgPSAoKSA9PiB7XG4gIHJldHVybiBpc1ZhbGlkRmllbGQobmFtZUlucHV0KVxuICAgICYmIGlzVmFsaWRGaWVsZChlbWFpbElucHV0KVxuICAgICYmIGlzVmFsaWRGaWVsZChsZXR0ZXJUZXh0YXJlYSk7XG59O1xuXG5jb25zdCBvbkZpZWxkRGF0YUNoYW5nZWQgPSAoZXZ0KSA9PiB7XG4gIGlzVmFsaWRGaWVsZChldnQudGFyZ2V0KTtcbn07XG5cbmlmIChwb3B1cCAmJiBvcGVuUG9wdXBCdG4gJiYgY2xvc2VQb3B1cEJ0biAmJiBzdWJtaXRQb3B1cEZvcm1CdG4pIHtcbiAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShOT19KU19DTEFTUyk7XG4gIG9wZW5Qb3B1cEJ0bi5hZGRFdmVudExpc3RlbmVyKGBjbGlja2AsIG9wZW5Qb3B1cCk7XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHNsaWRlckNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5wcmluY2lwbGVzYCk7XG5cbmlmIChzbGlkZXJDb250YWluZXIpIHtcbiAgY29uc3QgU0xJREVfQUNUSVZFX0NMQVNTID0gYHByaW5jaXBsZXNfX3NsaWRlLS1hY3RpdmVgO1xuICBjb25zdCBCVVRUT05fQUNUSVZFX0NMQVNTID0gYHByaW5jaXBsZXNfX2NvbnRyb2wtYnV0dG9uLS1hY3RpdmVgO1xuXG4gIGNvbnN0IGNyZWF0ZUVsZW1lbnQgPSAodGVtcGxhdGUpID0+IHtcbiAgICBjb25zdCBuZXdFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChgZGl2YCk7XG4gICAgbmV3RWxlbWVudC5pbm5lckhUTUwgPSB0ZW1wbGF0ZTtcbiAgICByZXR1cm4gbmV3RWxlbWVudC5maXJzdENoaWxkO1xuICB9O1xuXG4gIGNvbnN0IGNyZWF0ZVNsaWRlckJ1dHRvbiA9IChzbGlkZSwgbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgYnV0dG9uVGVtcGxhdGUgPSAoXG4gICAgICBgPGxpPlxuICAgICAgICA8YnV0dG9uIGNsYXNzPVwicHJpbmNpcGxlc19fY29udHJvbC1idXR0b24gICR7bnVtYmVyID8gYGAgOiBCVVRUT05fQUNUSVZFX0NMQVNTfVwiIHR5cGU9XCJidXR0b25cIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInZpc3VhbGx5LWhpZGRlblwiPtCf0YDQuNC90YbQuNC/ICR7bnVtYmVyICsgMX08L3NwYW4+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9saT5gXG4gICAgKTtcblxuICAgIGNvbnN0IGJ1dHRvbldyYXBwZXIgPSBjcmVhdGVFbGVtZW50KGJ1dHRvblRlbXBsYXRlKTtcbiAgICBidXR0b25XcmFwcGVyLmZpcnN0RWxlbWVudENoaWxkLmFkZEV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgKGV2dCkgPT4ge1xuICAgICAgY29uc3QgY3VycmVudFNsaWRlID0gc2xpZGVyQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYC4ke1NMSURFX0FDVElWRV9DTEFTU31gKTtcblxuICAgICAgaWYgKGN1cnJlbnRTbGlkZSAhPT0gc2xpZGUpIHtcbiAgICAgICAgc2xpZGVyQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYC4ke0JVVFRPTl9BQ1RJVkVfQ0xBU1N9YClcbiAgICAgICAgICAuY2xhc3NMaXN0LnJlbW92ZShCVVRUT05fQUNUSVZFX0NMQVNTKTtcbiAgICAgICAgY3VycmVudFNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoU0xJREVfQUNUSVZFX0NMQVNTKTtcblxuICAgICAgICBzbGlkZS5jbGFzc0xpc3QuYWRkKFNMSURFX0FDVElWRV9DTEFTUyk7XG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmFkZChCVVRUT05fQUNUSVZFX0NMQVNTKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICghbnVtYmVyKSB7XG4gICAgICBzbGlkZS5jbGFzc0xpc3QuYWRkKFNMSURFX0FDVElWRV9DTEFTUyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJ1dHRvbldyYXBwZXI7XG4gIH07XG5cbiAgY29uc3QgYmVmb3JlSW5zZXJ0QmxvY2sgPSBzbGlkZXJDb250YWluZXIucXVlcnlTZWxlY3RvcihgI3ByaW5jaXBsZXNfX3NsaWRlci1qc2ApO1xuICBjb25zdCBzbGlkZXMgPSBzbGlkZXJDb250YWluZXIucXVlcnlTZWxlY3RvckFsbChgLnByaW5jaXBsZXNfX3NsaWRlYCk7XG5cbiAgY29uc3QgYnV0dG9uc0NvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoYDx1bCBjbGFzcz1cInByaW5jaXBsZXNfX2NvbnRyb2wgbGlzdC1yZXNldFwiPjwvdWw+YCk7XG5cbiAgc2xpZGVzLmZvckVhY2goKHNsaWRlLCBpbmRleCkgPT4ge1xuICAgIHNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoYHByaW5jaXBsZXNfX3NsaWRlLS1uby1qc2ApO1xuXG4gICAgYnV0dG9uc0NvbnRhaW5lci5hcHBlbmQoY3JlYXRlU2xpZGVyQnV0dG9uKHNsaWRlLCBpbmRleCkpO1xuICB9KTtcblxuXG4gIGJlZm9yZUluc2VydEJsb2NrLmFmdGVyKGJ1dHRvbnNDb250YWluZXIpO1xufVxuIl19
